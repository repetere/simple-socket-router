!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).els={})}(this,function(t){"use strict";function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var r;const o=(function(t,r){t.exports=function t(r,o,n){function u(i,a){if(!o[i]){if(!r[i]){var c=e;if(!a&&c)return c(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var p=o[i]={exports:{}};r[i][0].call(p.exports,function(t){var e=r[i][1][t];return u(e||t)},p,p.exports,t,r,o,n)}return o[i].exports}for(var s=e,i=0;i<n.length;i++)u(n[i]);return u}({1:[function(t,e,r){var o=function(t){var e,r=[];return t instanceof RegExp?(e=t,t.toString()):e=n(t,r),{re:e,src:t.toString(),keys:r}},n=function(t,e){return t=t.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?|\*/g,function(t,r,o,n,u,s){return"*"===t?(e.push(void 0),t):(e.push(n),r=r||"",(s?"":r)+"(?:"+(s?r:"")+(o||"")+(u||"([^/]+?)")+")"+(s||""))}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$","i")},u=function(t,e,r){for(var o,n=r||0,u=t.length;n<u;++n){var s=t[n],i=s.re,a=s.keys,c=[],p={};if(o=e.match(i)){for(var f=1,u=o.length;f<u;++f){var h=a[f-1],l="string"==typeof o[f]?unescape(o[f]):o[f];h?p[h]=l:c.push(l)}return{params:p,splats:c,route:s.src,next:n+1}}}},s=function(){return{routes:[],routeMap:{},addRoute:function(t,e){if(!t)throw new Error(" route requires a path");if(!e)throw new Error(" route "+t.toString()+" requires a callback");if(this.routeMap[t])throw new Error("path is already defined: "+t);var r=o(t);r.fn=e,this.routes.push(r),this.routeMap[t]=e},removeRoute:function(t){if(!t)throw new Error(" route requires a path");if(!this.routeMap[t])throw new Error("path does not exist: "+t);for(var e=[],r=0;r<this.routes.length;r++){var o=this.routes[r];o.src!==t&&e.push(o)}this.routes=e,delete this.routeMap[t]},match:function(t,e){var r=u(this.routes,t,e);return r&&(r.fn=this.routeMap[r.route],r.next=this.match.bind(this,t,r.next)),r}}};s.Route=o,s.pathToRegExp=n,s.match=u,s.Router=s,e.exports=s},{}]},{},[1])(1)}(r={exports:{}},r.exports),r.exports);function n({socket:t,router:e}){return function(r,o){const[n,u]=r,s=e.match(n),i={path:n,body:u,socket:t};let a=t=>t;const c={send(e){try{t.emit(n,a(e)),a=null}catch(e){t.emit("error",new Error("Response already sent"))}}};s&&(i.params=s.params,i.splats=s.splats,s.fn(i,c,s)),o()}}t.Router=o,t.EventRouter=function({socket:t,router:e}){t.use?t.use(n({socket:t,router:e})):function(t,e){t._onevent=t.onevent;const r=()=>{};t.onevent=function(o){e(o.data,r);const n=new Array(arguments.length);for(var u=0;u<n.length;++u)n[u]=arguments[u];t._onevent.apply(t,n)}}(t,n({socket:t,router:e}))},Object.defineProperty(t,"__esModule",{value:!0})});
