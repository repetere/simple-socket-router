!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).els={})}(this,function(t){"use strict";function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var r;const o=(function(t,r){t.exports=function t(r,o,n){function s(a,i){if(!o[a]){if(!r[a]){var c=e;if(!i&&c)return c(a,!0);if(u)return u(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=o[a]={exports:{}};r[a][0].call(p.exports,function(t){var e=r[a][1][t];return s(e||t)},p,p.exports,t,r,o,n)}return o[a].exports}for(var u=e,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(t,e,r){var o=function(t){var e,r=[];return t instanceof RegExp?(e=t,t.toString()):e=n(t,r),{re:e,src:t.toString(),keys:r}},n=function(t,e){return t=t.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?|\*/g,function(t,r,o,n,s,u){return"*"===t?(e.push(void 0),t):(e.push(n),r=r||"",(u?"":r)+"(?:"+(u?r:"")+(o||"")+(s||"([^/]+?)")+")"+(u||""))}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$","i")},s=function(t,e,r){for(var o,n=r||0,s=t.length;n<s;++n){var u=t[n],a=u.re,i=u.keys,c=[],p={};if(o=e.match(a)){for(var f=1,s=o.length;f<s;++f){var h=i[f-1],l="string"==typeof o[f]?unescape(o[f]):o[f];h?p[h]=l:c.push(l)}return{params:p,splats:c,route:u.src,next:n+1}}}},u=function(){return{routes:[],routeMap:{},addRoute:function(t,e){if(!t)throw new Error(" route requires a path");if(!e)throw new Error(" route "+t.toString()+" requires a callback");if(this.routeMap[t])throw new Error("path is already defined: "+t);var r=o(t);r.fn=e,this.routes.push(r),this.routeMap[t]=e},removeRoute:function(t){if(!t)throw new Error(" route requires a path");if(!this.routeMap[t])throw new Error("path does not exist: "+t);for(var e=[],r=0;r<this.routes.length;r++){var o=this.routes[r];o.src!==t&&e.push(o)}this.routes=e,delete this.routeMap[t]},match:function(t,e){var r=s(this.routes,t,e);return r&&(r.fn=this.routeMap[r.route],r.next=this.match.bind(this,t,r.next)),r}}};u.Route=o,u.pathToRegExp=n,u.match=s,u.Router=u,e.exports=u},{}]},{},[1])(1)}(r={exports:{}},r.exports),r.exports);function n({socket:t,router:e}){return async function(r,o){const[n,s]=r,u=e.match(n),a={path:n,body:s,socket:t};let i=t=>t;const c={send(e){try{t.emit(n,i(e)),i=null}catch(e){t.emit("error",new Error("Response already sent"))}}};u&&(a.params=u.params,a.splats=u.splats,u.fn(a,c,u)),o()}}t.Router=o,t.EventRouter=function({socket:t,router:e}){t.use?t.use(n({socket:t,router:e})):function(t,e){t._onevent=t.onevent;const r=()=>{};t.onevent=function(o){e(o.data,r);const n=new Array(arguments.length);for(var s=0;s<n.length;++s)n[s]=arguments[s];t._onevent.apply(t,n)}}(t,n({socket:t,router:e}))},Object.defineProperty(t,"__esModule",{value:!0})});
